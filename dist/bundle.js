(()=>{"use strict";const e=function(e,t){var n=document.querySelector("".concat(e)),r=document.querySelector("".concat(t));n.addEventListener("click",(function(){r.style.display&&"none"!==r.style.display||(r.style.display="block","fixed-gift"===n.classList[0]&&(r.querySelector(".close-btn").addEventListener("click",(function(){r.style.display="none"})),n.style.display="none"))})),r.addEventListener("click",(function(e){var t=e.target;t.classList.contains("close_icon")?r.style.display="none":t.closest(".popup-menu")||(t=t.closest(".form-content"))||(r.style.display="none")}))},t=function(e){var t=document.querySelector("#".concat(e)),n=document.querySelector("#thanks"),r=n.querySelector(".form-content"),o=r.querySelector("h4"),c=r.querySelector("p"),a=document.createElement("div");t.appendChild(a);var l=function(){var e=document.querySelector("#price-total"),t=document.querySelector("#card_leto_mozaika"),n=document.querySelector(".time"),r=document.querySelector(".cards-types");if(r)r.children[0].checked=!0;else{var o=n.children[0];e.textContent=1999,t.checked=!0,o.checked=!0}},i=function(){document.querySelector("#footer_leto_mozaika").checked=!0},u=function(e){a.textContent=e,a.style.cssText="font-size: 1.2rem; color: red;"};t.addEventListener("submit",(function(r){r.preventDefault(),function(){var n,r,o;t.querySelectorAll("input").forEach((function(e){"checkbox"===e.type?n=e:"phone"===e.name?r=e:"name"===e.name&&(o=e)}));var c=r.value.split(""),a=o.value.split("");return 18!=c.length?(u("Номер телефона введён некорректно!"),!1):a.length<3?(u("Имя введёно некорректно!"),!1):"footer_form"===e||(n.checked?(n.checked=!1,!0):(u("Подтвердите обработку персональных данных!"),!1))}()&&function(r){a.style.cssText="font-size: 2rem; color: white;",a.textContent="Загрузка...";var u=new FormData(r),s={};u.forEach((function(e,t){s[t]=e}));var d=function(e){e.querySelectorAll("input").forEach((function(e){"radio"===e.type||"form_name"===e.name||(e.value="")})),a.textContent=""};(function(e){return fetch("./server.php",{method:"POST",header:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})})(s).then((function(r){if(200!==r.status)throw new Error("status network not 200");"card_order"===e&&l(),"footer_form"===e&&i();var o=t.closest(".popup");o&&(o.style.display="none"),n.style.display="flex",setTimeout((function(){n.style.display="none"}),3e3),d(t)})).catch((function(r){"card_order"===e&&l(),"footer_form"===e&&i();var a=t.closest(".popup");a&&(a.style.display="none"),n.style.display="flex",o.textContent="Упс...",c.textContent="Что то пошло не так...",d(t),console.error(r)}))}(r.target)}))};function n(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,c=function(){};return{s:c,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw a}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__",r=document.querySelectorAll(e);function o(e){var n=e.keyCode,r=t,o=r.replace(/\D/g,""),c=this.value.replace(/\D/g,""),a=0,l=r.replace(/[_\d]/g,(function(e){return a<c.length?c.charAt(a++)||o.charAt(a):e}));-1!=(a=l.indexOf("_"))&&(l=l.slice(0,a));var i=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(i=new RegExp("^"+i+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}var c,a=n(r);try{for(a.s();!(c=a.n()).done;){var l=c.value;l.addEventListener("input",o),l.addEventListener("focus",o),l.addEventListener("blur",o)}}catch(e){a.e(e)}finally{a.f()}};try{c=".clubs-list",a=".clubs-ul",l=document.querySelector(c),i=document.querySelector(a),l.addEventListener("click",(function(){"block"===i.style.display?i.style.display="none":i.style.display="block"}))}catch(e){}var c,a,l,i,u,s,d,y,f;try{e(".open-popup","#free_visit_form")}catch(e){}try{e(".menu-button",".popup-menu")}catch(e){}try{t("form2")}catch(e){}try{e(".callback-btn","#callback_form")}catch(e){}try{t("form1")}catch(e){}try{e(".fixed-gift","#gift")}catch(e){}try{u=Array.from(document.querySelector(".main-slider").children),s=u.length-1,d=0,setInterval((function(){!function(e){u[e].style.display="none"}(d),d===s?d=0:d++,function(e){u[e].style.display="flex"}(d)}),3e3)}catch(e){}try{t("banner-form")}catch(e){}try{!function(){var e=document.querySelector("#price-total"),t=document.querySelector("#card_order"),n=document.querySelector(".time"),r=document.querySelector("#card_leto_mozaika"),o=document.querySelector("#card_leto_schelkovo"),c=t.querySelector(".input-text").children[0],a=!1,l=r.value,i="1";t.addEventListener("input",(function(e){e.target===r?(l=r.value,s()):e.target===o?(l=o.value,s()):e.target===c&&("ТЕЛО2020"===e.target.value?(a=!0,s()):(a=!1,s()))})),n.addEventListener("change",(function(e){i=e.target.value,s()}));var u=function(t){e.textContent=a?Math.round(.7*t):t},s=function(){"mozaika"===l&&"1"===i?u(1999):"mozaika"===l&&"6"===i?u(9900):"mozaika"===l&&"9"===i?u(13900):"mozaika"===l&&"12"===i?u(19900):"schelkovo"===l&&"1"===i?u(2999):"schelkovo"===l&&"6"===i?u(14990):"schelkovo"===l&&"9"===i?u(21990):"schelkovo"===l&&"12"===i&&u(24990)}}()}catch(e){}try{y=document.querySelector("#totop"),f=document.querySelector(".top-menu"),window.addEventListener("scroll",(function(){var e=document.documentElement.scrollTop;f.style.position=e>=186?"fixed":"relative",y.style.display=e>=600?"block":"none"}))}catch(e){}try{t("card_order")}catch(e){}try{t("footer_form")}catch(e){}try{!function(){var e=document.querySelector("#thanks"),t=e.querySelector(".form-content"),n=t.querySelector("h4"),r=t.querySelector("p");e.addEventListener("click",(function(t){var n=t.target;n.classList.contains("close_icon")||n.classList.contains("close-btn")?(e.style.display="none",o()):(n=n.closest(".form-content"))||(e.style.display="none",o())}));var o=function(){n.textContent="СПАСИБО!",r.textContent="Ваша заявка отправлена. Мы свяжемся с вами в ближайшее время."}}()}catch(e){}try{o("#callback_footer_form-phone")}catch(e){}try{o("#callback_form-phone")}catch(e){}try{o("#phone")}catch(e){}try{o("#callback_form1-phone")}catch(e){}try{o("#callback_form2-phone")}catch(e){}try{document.querySelectorAll("input").forEach((function(e){"name"===e.name&&e.addEventListener("input",(function(e){""!==e.target.value&&(e.target.value.match(/([а-я]|\s)$/gi)||(e.target.value=e.target.value.split("").slice(0,e.target.value.length-1).join("")))}))}))}catch(e){}try{!function(){var e,t=document.querySelector(".gallery-slider"),n=gallery.querySelectorAll(".slide"),r=gallery.querySelectorAll(".slider-dots"),o=0,c=function(e,t,n){e[t].classList.remove(n)},a=function(e,t,n){e[t].classList.add(n)};t.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".slider-arrow, .slider-dots")&&(c(n,o,"slide-active"),c(r,o,"active"),t.matches(".slider-arrow.next")?o++:t.matches(".slider-arrow.prev")?o--:t.matches(".slider-dots")&&r.forEach((function(e,n){e===t&&(o=n)})),o>=n.length&&(o=0),o<0&&(o=n.length-1),a(n,o,"slide-active"),a(r,o,"active"))}));var l=function(){c(n,o,"slide-active"),c(r,o,"active"),++o>=n.length&&(o=0),a(n,o,"slide-active"),a(r,o,"active")},i=function(){e=setInterval(l,3e3)};t.addEventListener("mouseover",(function(){clearInterval(e)})),t.addEventListener("mouseout",(function(){i()})),i()}()}catch(e){}})();